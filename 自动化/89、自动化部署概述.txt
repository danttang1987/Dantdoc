89、自动化部署概述

常见手工部署：


缺点：
1、全程运维参与
2、上线速度慢
3、人为失误
4、回滚慢


新上线的项目：

	环境规划：
		开发环境：   开发数据库/
		
	测试环境：功能测试和性能测试

	生产环境：直接对用户提供服务

	预生产环境：用生产环境中的一个节点担任
			产生的原因：数据库不一致，
						联调接口
						


设计一套生产自动化部署系统

	1、规划
	2、实现
	3、总结和扩展    PDCA
	4、在生产环境中应用

规划：

1、一个集群有10个节点
   1、实现一键部署这10个节点
   2、一键回滚到任意版本
   3、一键回滚到上一版本
   
部署  回滚

部署：1、代码在哪里：svn git
      2、获取什么版本的代码
	          svn+git直接拉取某个分支
			  svn指定版本
			  git指定tag
	  3、各节点配置文件是否一致；
	      代码仓库的差异：配置文件是否放到代码仓库；
		  配置文件只在部署机上有。
	  4、如何更新：是否需要重启服务
	  5、测试
	  6、串行还是并行：是否分组
	  7、如何执行：1、shell ./    2、web界面
	  
	  
	  
流程：

1、获取代码
2、编译（可选）
3、配置文件放进代码
4、打包
5、scp到目标服务器
6、将目标服务器移出集群
7、解压
8、放到web root
9、scp差异文件
10、重启服务
11、测试
12、加入集群



注：所有web服务只能用普通用户启动




#!/bin/bash
















	     
	  
	          
	  





